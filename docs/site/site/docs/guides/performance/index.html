<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="pgGit Documentation">
    <title>Performance Guide - pgGit</title>
    <link rel="stylesheet" href="/style.css">
    <style>
        .doc-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }
        .doc-content h1:first-child {
            margin-top: 0;
        }
        .toc {
            background: var(--bg-light);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .toc h2 {
            margin-top: 0;
            font-size: 1.25rem;
        }
        .toc ul {
            list-style: none;
            padding-left: 1rem;
        }
        .toc li {
            margin: 0.5rem 0;
        }
        .breadcrumb {
            margin-bottom: 2rem;
            color: var(--text-light);
        }
        .breadcrumb a {
            color: var(--text-light);
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="/" class="logo">pgGit</a>
            <ul>
                <li><a href="/#quick-start">Quick Start</a></li>
                <li><a href="/docs/">Documentation</a></li>
                <li><a href="/api/">API Reference</a></li>
                <li><a href="https://github.com/evoludigit/pggit">GitHub</a></li>
            </ul>
        </nav>
    </header>
    
    <main class="doc-content">
        <div class="breadcrumb">
            <a href="/">Home</a> / <a href="/docs/">Docs</a> / Performance
Guide - pgGit
        </div>
        
                <div class="toc">
            <h2>Table of Contents</h2>
            <ul>
            <li><a href="#performance-guide"
            id="toc-performance-guide">Performance Guide</a>
            <ul>
            <li><a href="#performance-overview"
            id="toc-performance-overview">üéØ Performance
            Overview</a></li>
            <li><a href="#current-performance-features"
            id="toc-current-performance-features">‚ö° Current Performance
            Features</a>
            <ul>
            <li><a href="#lightweight-event-triggers"
            id="toc-lightweight-event-triggers">1. Lightweight Event
            Triggers</a></li>
            <li><a href="#efficient-storage"
            id="toc-efficient-storage">2. Efficient Storage</a></li>
            <li><a href="#ai-analysis-performance"
            id="toc-ai-analysis-performance">3. AI Analysis
            Performance</a></li>
            </ul></li>
            <li><a href="#performance-monitoring"
            id="toc-performance-monitoring">üìä Performance
            Monitoring</a>
            <ul>
            <li><a href="#built-in-functions"
            id="toc-built-in-functions">Built-in Functions</a></li>
            </ul></li>
            <li><a href="#optimization-tips"
            id="toc-optimization-tips">üöÄ Optimization Tips</a>
            <ul>
            <li><a href="#for-large-databases"
            id="toc-for-large-databases">For Large Databases</a></li>
            <li><a href="#for-high-frequency-changes"
            id="toc-for-high-frequency-changes">For High-Frequency
            Changes</a></li>
            </ul></li>
            <li><a href="#benchmarking-your-installation"
            id="toc-benchmarking-your-installation">üìà Benchmarking Your
            Installation</a>
            <ul>
            <li><a href="#basic-performance-test"
            id="toc-basic-performance-test">Basic Performance
            Test</a></li>
            <li><a href="#database-size-impact"
            id="toc-database-size-impact">Database Size Impact</a></li>
            </ul></li>
            <li><a href="#best-practices" id="toc-best-practices">üéØ
            Best Practices</a>
            <ul>
            <li><a href="#monitoring" id="toc-monitoring">1.
            Monitoring</a></li>
            <li><a href="#optimization" id="toc-optimization">2.
            Optimization</a></li>
            <li><a href="#troubleshooting" id="toc-troubleshooting">3.
            Troubleshooting</a></li>
            </ul></li>
            <li><a href="#performance-support"
            id="toc-performance-support">üìû Performance Support</a></li>
            </ul></li>
            </ul>
        </div>
                
        <article class="markdown-body">
            <h1 id="performance-guide">Performance Guide</h1>
            <p>This guide covers performance considerations and
            monitoring for pggit.</p>
            <h2 id="performance-overview">üéØ Performance Overview</h2>
            <p>pggit is designed to be lightweight and efficient: -
            <strong>Event triggers</strong>: Minimal overhead for DDL
            tracking - <strong>AI analysis</strong>: Fast local
            processing with GPT-2 - <strong>Storage</strong>: Efficient
            change tracking without full schema duplication</p>
            <h2 id="current-performance-features">‚ö° Current Performance
            Features</h2>
            <h3 id="lightweight-event-triggers">1. Lightweight Event
            Triggers</h3>
            <div class="sourceCode" id="cb1"><pre
            class="sourceCode sql"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Check event trigger performance</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    tgname,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    tgenabled </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> pg_trigger </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> tgname <span class="kw">LIKE</span> <span class="st">&#39;pggit%&#39;</span>;</span></code></pre></div>
            <h3 id="efficient-storage">2. Efficient Storage</h3>
            <div class="sourceCode" id="cb2"><pre
            class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Monitor pggit storage usage</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    schemaname,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    tablename,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    pg_size_pretty(pg_total_relation_size(schemaname<span class="op">||</span><span class="st">&#39;.&#39;</span><span class="op">||</span>tablename)) <span class="kw">as</span> <span class="kw">size</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> pg_tables </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> schemaname <span class="op">=</span> <span class="st">&#39;pggit&#39;</span>;</span></code></pre></div>
            <h3 id="ai-analysis-performance">3. AI Analysis
            Performance</h3>
            <div class="sourceCode" id="cb3"><pre
            class="sourceCode sql"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Time AI analysis operations</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>\timing <span class="kw">on</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> pggit.analyze_migration_with_ai(<span class="st">&#39;test&#39;</span>, <span class="st">&#39;CREATE TABLE test (id INT);&#39;</span>, <span class="st">&#39;manual&#39;</span>);</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>\timing <span class="kw">off</span></span></code></pre></div>
            <h2 id="performance-monitoring">üìä Performance
            Monitoring</h2>
            <h3 id="built-in-functions">Built-in Functions</h3>
            <div class="sourceCode" id="cb4"><pre
            class="sourceCode sql"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Check database object count</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">as</span> total_objects <span class="kw">FROM</span> pggit.objects;</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Check history size</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">as</span> total_changes <span class="kw">FROM</span> pggit.history;</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Monitor function execution times</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    funcname,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    calls,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    total_time,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    mean_time</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> pg_stat_user_functions </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> schemaname <span class="op">=</span> <span class="st">&#39;pggit&#39;</span>;</span></code></pre></div>
            <h2 id="optimization-tips">üöÄ Optimization Tips</h2>
            <h3 id="for-large-databases">For Large Databases</h3>
            <ul>
            <li>Monitor event trigger performance impact</li>
            <li>Consider selective schema tracking if needed</li>
            <li>Use <code>EXPLAIN ANALYZE</code> on pggit queries for
            optimization</li>
            </ul>
            <h3 id="for-high-frequency-changes">For High-Frequency
            Changes</h3>
            <ul>
            <li>Monitor <code>pggit.history</code> table growth</li>
            <li>Consider periodic cleanup of old history records</li>
            <li>Check AI analysis response times</li>
            </ul>
            <h2 id="benchmarking-your-installation">üìà Benchmarking Your
            Installation</h2>
            <h3 id="basic-performance-test">Basic Performance Test</h3>
            <div class="sourceCode" id="cb5"><pre
            class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run Viktor&#39;s comprehensive test and time it</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">time</span> ./scripts/viktor-comprehensive-test.sh</span></code></pre></div>
            <h3 id="database-size-impact">Database Size Impact</h3>
            <div class="sourceCode" id="cb6"><pre
            class="sourceCode sql"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Measure pggit overhead</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">WITH</span> database_size <span class="kw">AS</span> (</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span> pg_database_size(current_database()) <span class="kw">as</span> total_size</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>pggit_size <span class="kw">AS</span> (</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span> <span class="fu">sum</span>(pg_total_relation_size(schemaname<span class="op">||</span><span class="st">&#39;.&#39;</span><span class="op">||</span>tablename)) <span class="kw">as</span> pggit_size</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> pg_tables </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">WHERE</span> schemaname <span class="op">=</span> <span class="st">&#39;pggit&#39;</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    pg_size_pretty(total_size) <span class="kw">as</span> database_size,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    pg_size_pretty(pggit_size) <span class="kw">as</span> pggit_size,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>((pggit_size:<span class="ch">:float</span> <span class="op">/</span> total_size:<span class="ch">:float</span>) <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>) <span class="kw">as</span> overhead_percent</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> database_size, pggit_size;</span></code></pre></div>
            <h2 id="best-practices">üéØ Best Practices</h2>
            <h3 id="monitoring">1. Monitoring</h3>
            <ul>
            <li>Regularly check <code>pg_stat_user_functions</code> for
            pggit function performance</li>
            <li>Monitor <code>pggit.history</code> table growth</li>
            <li>Track AI analysis timing for performance regression</li>
            </ul>
            <h3 id="optimization">2. Optimization</h3>
            <ul>
            <li>Keep PostgreSQL statistics up to date:
            <code>ANALYZE;</code></li>
            <li>Consider indexing strategies for custom queries</li>
            <li>Monitor system resources during large migrations</li>
            </ul>
            <h3 id="troubleshooting">3. Troubleshooting</h3>
            <ul>
            <li>Use <code>EXPLAIN ANALYZE</code> for slow pggit
            queries</li>
            <li>Check PostgreSQL logs for event trigger issues</li>
            <li>Monitor memory usage during AI analysis</li>
            </ul>
            <h2 id="performance-support">üìû Performance Support</h2>
            <p>Having performance issues?</p>
            <ul>
            <li><strong>Community</strong>: <a
            href="https://github.com/evoludigit/pggit/issues">GitHub
            Issues</a></li>
            <li><strong>Documentation</strong>: Check <a
            href="../getting-started/TROUBLESHOOTING.md">Troubleshooting
            Guide</a></li>
            <li><strong>Metrics</strong>: Use the voluntary metrics
            collection function (see Contributing Guide)</li>
            </ul>
            <hr />
            <p><em>Performance monitoring is key to maintaining healthy
            pggit installations. Report any performance issues to help
            improve the project.</em></p>
        </article>
    </main>
    
    <footer>
        <p>pgGit is open source software under the MIT License</p>
        <p>Built with ‚ù§Ô∏è by <a href="https://github.com/evoludigit">@evoludigit</a></p>
    </footer>
</body>
</html>